</body>
</html>
<!DOCTYPE html>
<html>
<head>
    <title>Quiz Buzzer</title>
    <meta charset="UTF-8">
    <script src="https://www.gstatic.com/firebasejs/10.13.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.13.1/firebase-database-compat.js"></script>
    <style>
        body { font-family: Arial; text-align: center; margin: 50px; }
        #buzzer { width: 300px; height: 200px; font-size: 40px; background: #4CAF50; color: white; border: none; border-radius: 20px; cursor: pointer; }
        #buzzer:disabled { background: #ccc; }
        .winner { background: #FF5722 !important; animation: pulse 0.5s infinite; }
        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
        #status { font-size: 24px; margin: 20px; }
    </style>
</head>
<body>
<h1>üî¥ Quiz Buzzer</h1>
<input id="room" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –∫–æ–º–Ω–∞—Ç—ã (4 —Å–∏–º–≤–æ–ª–∞)" maxlength="4" style="font-size:20px;padding:10px;">
<input id="name" placeholder="–í–∞—à–µ –∏–º—è" style="font-size:20px;padding:10px;">
<br><br>
<button id="join">–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è</button>
<br><br>
<div id="status">–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –∫–æ–º–Ω–∞—Ç—ã –∏ –∏–º—è</div>
<button id="buzzer" style="display:none;">üî¥ –ù–ê–ñ–ú–ò –ü–ï–†–í–´–ú!</button>
<div id="winner"></div>

<script>
    // –í–°–¢–ê–í–¨–¢–ï –°–í–û–ô firebaseConfig –ó–î–ï–°–¨
    const firebaseConfig = {
        apiKey: "AIzaSyBzN0S7G_q0bDPmnB0YlyWKxbwTUAoqjCE",
        authDomain: "buzzer-by-dmitrig.firebaseapp.com",
        databaseURL: "https://buzzer-by-dmitrig-default-rtdb.europe-west1.firebasedatabase.app",
        projectId: "buzzer-by-dmitrig",
        storageBucket: "buzzer-by-dmitrig.firebasestorage.app",
        messagingSenderId: "322792763681",
        appId: "1:322792763681:web:20017acae963fe31248e60"
    };

    document.getElementById('buzzer').onclick = () => {
        const buzzerRef = db.ref(`buzzers/${roomId}`);
        buzzerRef.transaction(current => {
            if (!current) {
                return { winner: playerName, time: Date.now(), locked: true };
            }
            return current;
        });
    };

    function listenForBuzzer() {
        const buzzerRef = db.ref(`buzzers/${roomId}`);
        buzzerRef.on('value', snap => {
            const data = snap.val();
            const buzzerBtn = document.getElementById('buzzer');
            if (data) {
                document.getElementById('winner').innerHTML = `üèÜ –ü–æ–±–µ–¥–∏–ª: ${data.winner}!`;
                buzzerBtn.disabled = true;
                buzzerBtn.classList.add('winner');
            } else {
                buzzerBtn.disabled = false;
                buzzerBtn.classList.remove('winner');
                document.getElementById('winner').innerHTML = '';
            }
        });
    }
</script>
</body>
</html>
